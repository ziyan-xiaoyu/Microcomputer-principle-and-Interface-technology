CODE SEGMENT            ;H8255-2.ASM
ASSUME CS:CODE
IOCONPT EQU 0FF2BH
IOAPT	EQU 0FF28H
IOBPT	EQU 0FF29H
IOCPT	EQU 0FF2AH
	ORG 11e0H
START:	MOV AL,82H
	MOV DX,IOCONPT
	OUT DX,AL
	MOV DX,IOBPT
	IN AL,DX
	MOV BYTE PTR DS:[0601H],AL
	MOV DX,IOCONPT
	MOV AL,80H
	OUT DX,AL
	MOV DX,IOBPT
	MOV AL,DS:[0601H]
	OR AL,0F0H
	OUT DX,AL
	MOV DX,IOCPT
	MOV AL,0F0H
	OUT DX,AL
	CALL DELAY1
IOLED0: MOV AL,10100101B
	MOV DX,IOCPT
	OUT DX,AL
	CALL DELAY1
	CALL DELAY1
	OR AL,0F0H
	OUT DX,AL
	MOV CX,8H
IOLED1: MOV DX,IOBPT
	MOV AL,DS:[0601H]
	AND AL,10101111B
	OUT DX,AL
	CALL DELAY2
	OR AL,01010000B
	OUT DX,AL
	CALL DELAY2
	LOOP IOLED1
	MOV DX,IOCPT
	MOV AL,0F0H
	OUT DX,AL
	CALL DELAY2
	MOV AL,01011010B
	OUT DX,AL
	CALL DELAY1
	CALL DELAY1
	OR AL,0F0H
	OUT DX,AL
	MOV CX,8H
IOLED2: MOV DX,IOBPT
	MOV AL,DS:[0601H]
	AND AL,01011111B
	OUT DX,AL
	CALL DELAY2
	OR AL,10100000B
	OUT DX,AL
	CALL DELAY2
	LOOP IOLED2
	MOV DX,IOCPT
	MOV AL,0F0H
	OUT DX,AL
	CALL DELAY2
	JMP IOLED0
DELAY1: PUSH AX
	PUSH CX
	MOV CX,0030H
DELY2:	CALL DELAY2
	LOOP DELY2
	POP CX
	POP AX
	RET
DELAY2: PUSH CX
	MOV CX,8000H
DELA1:	LOOP DELA1
	POP CX
	RET
CODE ENDS
END  START
